# 写真アルバムアプリ Ver1.70

### ReadMe - 取扱説明書

## 1. 概要

これは、お気に入りの写真をレイアウトし、印刷可能なアルバムを簡単に作成するためのアプリケーションです。

ウェブブラウザだけで全ての操作が完結し、ソフトウェアのインストールは一切不要です。作成したアルバムは、ご家庭のプリンターで印刷したり、PDFとして保存したりすることができます。

<br>

## 2. 主な機能

*   **多彩なレイアウト**: A4サイズに最適化された7種類の写真レイアウト（全面1枚〜8枚グリッド）を選択可能。
*   **自由なカスタマイズ**: アルバム全体のメインタイトル、サブタイトル、写真ごとのコメントを自由に入力できます。
*   **フォント設定**: タイトルやコメントのフォント種類とサイズを細かく設定できます。
*   **サムネイル機能**: 作成したページが右側に一覧表示され、クリック一つで目的のページにジャンプできます。
*   **データの保存と読み込み**: 作成中のアルバムデータは、いつでもJSONファイルとして保存（エクスポート）し、後から読み込んで（インポートして）作業を再開できます。
*   **完全オフライン動作**: 一度ファイルをダウンロードすれば、インターネット接続がない場所でも利用可能です。

<br>

## 3. 使い方

1.  `写真アルバムアプリ.html` ファイルをダウンロードします。
2.  ダウンロードしたHTMLファイルを、お使いのウェブブラウザ（Google Chrome, Firefox, Microsoft Edgeなど）で開きます。
3.  アプリケーションが起動します。画面左側の操作パネルから、アルバムの作成を開始してください。

<br>

## 4. バージョン情報 (Ver1.70での主な改善点)

**v1.60 -> v1.70 (2025-10-24)**

### 根本的な不具合の修正と安定性の向上

アルバムを保存する際に、**データが意図せず重複・肥大化してしまう重大な不具合を根本的に修正**しました。

*   **問題の現象**:
    *   JSONファイルとして保存し、再度読み込むと、特定のページが繰り返される。
    *   保存を繰り返すたびに、JSONファイルのサイズが雪だるま式に増加する。
    *   多数のページを持つデータの読み込みが極端に遅くなる、または失敗する。

*   **原因**:
    これまでの調査で、問題の根本原因は、アルバムを保存する際に、**中央に表示されている「アルバム本体のページ」だけでなく、右側のサムネイル表示用に使っていた「ページのコピー（クローン）」まで一緒に保存してしまっていた**ことでした。
    これにより、保存のたびにページ数が倍になり、データが重複・肥大化する悪循環に陥っていました。

*   **v1.70での修正内容**:
    *   **保存ロジックの抜本的見直し**: アルバムを保存する際、**中央のコンテンツエリアにある「アルバム本体のページ」のみを厳密に収集**するようにプログラムを修正しました。これにより、サムネイル用のコピーが誤って保存されることが完全になくなりました。
    *   **各関数の対象範囲の明確化**: サムネイルの生成、ページ番号の更新など、全ての主要な機能が「アルバム本体のページ」のみを対象とするように修正し、将来的な不具合の発生を防ぎます。

この修正により、以下の点が改善されました。
*   **データの重複・肥大化の問題が完全に解消されました。**
*   JSONファイルの保存・読み込みが常に正常に行われ、動作が大幅に安定・高速化しました。

